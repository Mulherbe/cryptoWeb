name: Crypto
on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    needs: deploy
    name: Mirror on epitech repo
    steps:
      - name: Push on remote repo
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USER }}
          key: ${{ secrets.SSH_KEY }}
          port: ${{ secrets.PORT }}
          script: |
            rm -R ~/T-POO-700-NCE_2
            git clone git@github.com:EpitechMscProPromo2024/T-POO-700-NCE_2.git
            cd ~/T-POO-700-NCE_2
            cp -R ../Pray4Elixir/* .
            git add .
            git commit -m "Push mirror"
            git push